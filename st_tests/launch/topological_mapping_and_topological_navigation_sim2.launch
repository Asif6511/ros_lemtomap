<?xml version="1.0"?>

<launch>	
	<arg name="load_map_directory" default=""/>
	<arg name="load_occ_map" default="$(find st_map_server)/maps/willowgarage_perfect.yaml"/> <!--e.g. "" or "$(rospack find st_map_server)/maps/willowgarage_perfect.yaml" -->

	<include file="$(find st_tests)/launch/includes/topological_mapping_normalnav_sim1.launch.xml">
		<arg name="load_map_directory" value="$(arg load_map_directory)"/>
	</include>

	<!-- Run timed shell script -->
	<node pkg="st_tests" 
              type="timed_roslaunch.sh" args="5 st_tests topological_mapping_normalnav_sim2.launch.xml" 
              name="timed_roslaunch" output="screen">
	</node>

	<!-- Run Move Base Topo -->
	<node pkg="st_navigation" type="move_base_topo" name="move_base_topo" output="screen">
		<param name="main_loop_frequency" value="100" /> <!-- default is 1hz currently -->
	</node>

	<!-- Load map -->
	<node pkg="map_server" type="map_server" name="map_server" output="screen" args="$(arg load_occ_map)"/>
	<!-- As much relies on the /map frame, make it fixed to /odom -->
 	<node pkg="tf" type="static_transform_publisher" name="map_frame_publisher" args="0 0 0 0 0 0 /odom /map 100"/>
</launch>

