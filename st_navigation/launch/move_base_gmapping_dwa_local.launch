<?xml version="1.0"?>

<launch>

	<!-- Some extra tweaks, based on original turtlebot_navigation/launch/includes/move_base.launch.xml -->
	<arg name="odom_topic" default="odom" />
	<include
		file="$(find turtlebot_navigation)/launch/includes/velocity_smoother.launch.xml" />
	<include
		file="$(find turtlebot_navigation)/launch/includes/safety_controller.launch.xml" />

	<!-- Navigation components -->
	<node pkg="move_base" type="move_base" respawn="false" name="move_base"
		output="screen" clear_params="true">
		<rosparam file="$(find st_navigation)/param/costmap_common_params.yaml" command="load" ns="global_costmap" />
		<rosparam file="$(find st_navigation)/param/costmap_common_params.yaml" command="load" ns="local_costmap" />
		<rosparam file="$(find st_navigation)/param/local_costmap_params.yaml" command="load" />
		<rosparam file="$(find st_navigation)/param/global_costmap_params.yaml" command="load" />
		<rosparam file="$(find st_navigation)/param/dwa_local_planner_params.yaml" command="load" />
		<rosparam file="$(find st_navigation)/param/move_base_params.yaml" command="load" />

		<param name="base_local_planner" value="dwa_local_planner/DWAPlannerROS" /> <!-- dwa_local planner is better for us than base_local planner -->

		<!-- these settings will probably be different for each robot, either overrule them here, or use personal or default values in costmap_common_params.yaml -->
		<param name="local_costmap/obstacle_layer/scan/sensor_frame" value="hokuyo_laser_sensor_link" />
		<param name="global_costmap/obstacle_layer/scan/sensor_frame" value="hokuyo_laser_sensor_link" />
		<param name="local_costmap/obstacle_layer/scan/topic" value="scan_hokuyo" />
		<param name="global_costmap/obstacle_layer/scan/topic" value="scan_hokuyo" />
		
		<remap from="cmd_vel" to="navigation_velocity_smoother/raw_cmd_vel" />
		<remap from="odom" to="$(arg odom_topic)" />
	</node>

</launch>
